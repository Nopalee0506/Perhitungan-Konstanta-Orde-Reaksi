import streamlit as st
import math

st.title("Analisis Orde Reaksi")

data = st.text_area(
    "Masukkan data (format: t,A)",
    "0,10\n1,7\n2,5\n3,3.6"
)

def regresi(x,y):
    n=len(x)
    sx=sum(x); sy=sum(y)
    sxy=sum(x[i]*y[i] for i in range(n))
    sx2=sum(i*i for i in x)
    return (n*sxy - sx*sy)/(n*sx2 - sx*sx)

if st.button("Hitung Orde"):
    try:
        t=[]; A=[]
        for row in data.split("\n"):
            ti, ai = row.split(",")
            t.append(float(ti))
            A.append(float(ai))

        A0 = A[0]
        y1 = [math.log(A0/a) for a in A]
        y2 = [(1/a - 1/A0) for a in A]

        k1 = regresi(t,y1)
        k2 = regresi(t,y2)

        orde = "ORDE 1" if abs(k1) > abs(k2) else "ORDE 2"

        st.success("Hasil Perhitungan:")
        st.write("k Orde 1 =", round(k1,4))
        st.write("k Orde 2 =", round(k2,4))
        st.write("Kesimpulan:", orde)

    except Exception as e:
        st.error("Format data salah!")
